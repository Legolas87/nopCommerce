@model DiscountModel

<div class="card-body">
    @await Html.PartialAsync("Table", new DataTablesModel
    {
        Name = "usagehistory-grid",
        UrlRead = new DataUrl("UsageHistoryList", "Discount", new RouteValueDictionary { [nameof(Model.DiscountUsageHistorySearchModel.DiscountId)] = Model.DiscountUsageHistorySearchModel.DiscountId }),
        UrlDelete = new DataUrl("UsageHistoryDelete", "Discount", new RouteValueDictionary { [nameof(Model.DiscountUsageHistorySearchModel.DiscountId)] = Model.DiscountUsageHistorySearchModel.DiscountId }),
        Length = Model.DiscountUsageHistorySearchModel.PageSize,
        LengthMenu = Model.DiscountUsageHistorySearchModel.AvailablePageSizes,
        ColumnCollection = new List<ColumnProperty>
            {
                new ColumnProperty(nameof(DiscountUsageHistoryModel.CreatedOn))
                {
                    Title = (await T("Admin.Promotions.Discounts.History.CreatedOn")).Value,
                    Width = "200",
                    Render = new RenderDate()
                },
                new ColumnProperty(nameof(DiscountUsageHistoryModel.CustomOrderNumber))
                {
                    Title = (await T("Admin.Promotions.Discounts.History.CustomOrderNumber")).Value,
                    ClassName =  NopColumnClassDefaults.Button,
                    Width = "200",
                    Render = new RenderCustom("renderColumnOrderInfo")
                },
                new ColumnProperty(nameof(DiscountUsageHistoryModel.OrderTotal))
                {
                    Title = (await T("Admin.Promotions.Discounts.History.OrderTotal")).Value,
                    Width = "200"
                },
                new ColumnProperty(nameof(DiscountUsageHistoryModel.Id))
                {
                    Title = (await T("Admin.Common.Delete")).Value,
                    Width = "100",
                    Render = new RenderButtonRemove((await T("Admin.Common.Delete")).Value),
                    ClassName = NopColumnClassDefaults.Button
                }
            }
    })

    <script asp-location="Footer">
        function renderColumnOrderInfo(data, type, row, meta) {
            if (row.OrderId > 0) {
                var textRenderer = $.fn.dataTable.render.text().display;
                return '<a class="btn btn-default" href="@Url.Content("~/Admin/Order/Edit/")' + row.OrderId + '"><i class="far fa-eye"></i>' + textRenderer(row.CustomOrderNumber) + ' - @await T("Admin.Common.View")</a>';
            } else {
                return 'order is deleted';
            }
        }
    </script>
</div>
